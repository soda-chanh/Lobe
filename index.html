<!DOCTYPE html>
<html>
<head>
    	<!-- Note: All core EaselJS classes are listed here: -->
	<script type="text/javascript" src="scripts/createjs/events/Event.js"></script>
	<script type="text/javascript" src="scripts/createjs/events/EventDispatcher.js"></script>
	<script type="text/javascript" src="scripts/createjs/utils/IndexOf.js"></script>
	<script type="text/javascript" src="scripts/easeljs/utils/UID.js"></script>
	<script type="text/javascript" src="scripts/easeljs/utils/Ticker.js"></script>
	<script type="text/javascript" src="scripts/easeljs/geom/Matrix2D.js"></script>
	<script type="text/javascript" src="scripts/easeljs/geom/Point.js"></script>
	<script type="text/javascript" src="scripts/easeljs/geom/Rectangle.js"></script>
	<script type="text/javascript" src="scripts/easeljs/display/Shadow.js"></script>
	<script type="text/javascript" src="scripts/easeljs/display/SpriteSheet.js"></script>
	<script type="text/javascript" src="scripts/easeljs/display/Graphics.js"></script>
	<script type="text/javascript" src="scripts/easeljs/display/DisplayObject.js"></script>
	<script type="text/javascript" src="scripts/easeljs/display/Container.js"></script>
	<script type="text/javascript" src="scripts/easeljs/display/Stage.js"></script>
	<script type="text/javascript" src="scripts/easeljs/display/Bitmap.js"></script>
	<script type="text/javascript" src="scripts/easeljs/display/Sprite.js"></script>
	<script type="text/javascript" src="scripts/easeljs/display/BitmapAnimation.js"></script>
	<script type="text/javascript" src="scripts/easeljs/display/BitmapText.js"></script>
	<script type="text/javascript" src="scripts/easeljs/display/Shape.js"></script>
	<script type="text/javascript" src="scripts/easeljs/display/Text.js"></script>
	<script type="text/javascript" src="scripts/easeljs/display/DOMElement.js"></script>
	<script type="text/javascript" src="scripts/easeljs/events/MouseEvent.js"></script>
	<script type="text/javascript" src="scripts/easeljs/filters/Filter.js"></script>
	<script type="text/javascript" src="scripts/easeljs/ui/ButtonHelper.js"></script>
	<script type="text/javascript" src="scripts/easeljs/ui/Touch.js"></script>
	<script type="text/javascript" src="scripts/easeljs/utils/SpriteSheetUtils.js"></script>
	<script type="text/javascript" src="scripts/easeljs/utils/SpriteSheetBuilder.js"></script>
    <script type="text/javascript">

	var KEYCODE_ENTER = 13;		//usefull keycode
	var KEYCODE_SPACE = 32;		//usefull keycode
	var KEYCODE_UP = 38;		//usefull keycode
	var KEYCODE_LEFT = 37;		//usefull keycode
	var KEYCODE_RIGHT = 39;		//usefull keycode
	var KEYCODE_DOWN = 40;		//usefull keycode
	var KEYCODE_W = 87;			//usefull keycode
	var KEYCODE_A = 65;			//usefull keycode
	var KEYCODE_D = 68;			//usefull keycode

	var room;
	var stage;
	var player;

	document.onkeydown = handleKeyDown;

	function init() {

		stage = new createjs.Stage("canvas");
		var room;

		// draw background
		for (var i = 0; i<40; i++){
			for (var j = 0 ; j < 30; j++) {
				var shape = new createjs.Shape();
 				shape.graphics.beginFill("#ff0000").drawRect(i * 20,j * 20, 20, 20);
 				shape.graphics.setStrokeStyle(1);
 				shape.graphics.beginStroke("black");
				stage.addChild(shape);
			}
		}

		// draw lines
		var line = new createjs.Shape();
		line.graphics.setStrokeStyle(2);
		line.graphics.beginStroke("black");
		for (var i = 0; i < 40; i++) {
			for (var j = 0; j < 30; j++) {
				line.graphics.moveTo(0, j * 20);
				line.graphics.lineTo(800, j * 20);
			}
			line.graphics.moveTo(i * 20, 0);
			line.graphics.lineTo(i * 20, 600);
		}
		line.graphics.endStroke();
		stage.addChild(line);
		stage.update();

		// draw player
		player = new createjs.Shape();
		player.graphics.beginFill("black").drawCircle(10, 10, 10);
		stage.addChild(player);

		// sprites
		var spriteData = {
			images: ["resources/marioSprites.png"],
			frames: [
	            // x, y, width, height, imageIndex, regX, regY
	            [0,0,20,20,0,0,0],
	            [0,0,20,20,1,32,64],
	            [0,0,20,20,2,32,64]
        	]
		};
 		var spriteSheet = new createjs.SpriteSheet(spriteData);
 		var sprite = new createjs.Sprite(spriteSheet, 0);
 		sprite.x = 20;
 		sprite.y = 20;
 		stage.addChild(sprite);
 		console.log(sprite);

		createjs.Ticker.addEventListener("tick", tick);
	}


	function tick(event) {



		//call sub ticks
		stage.update(event);
	}

	function renderTile(x, y) {
		if (room[x][y] == '') {

		}
	}

	//allow for WASD and arrow control scheme
	function handleKeyDown(e) {
	//cross browser issues exist
	if(!e){ var e = window.event; }
		switch(e.keyCode) {
			case KEYCODE_LEFT:	{
				//Lobe.player.moveLeft();
				console.log('left');
				player.x -= 20;
				e.preventDefault();
				break;
			}
			case KEYCODE_RIGHT: {

				//Lobe.player.moveRight();
				player.x += 20;	
				e.preventDefault();
				break;
			}
			case KEYCODE_UP:	{

				//Lobe.player.moveUp();
				console.log('up');
				player.y -= 20;	
				e.preventDefault();
				break;
			}
			case KEYCODE_DOWN:  {

				//Lobe.player.moveDown();
				player.y += 20;	
				e.preventDefault();
				break;
			}
		}
	}

	// var data = {
	// 	images: [playerImage, "playerImage.jpg"],
	// 	frames: {width:50, height:50},
	// };
	// var spriteSheet = new createjs.SpriteSheet(data);

	</script>
	</head>
	<body onLoad="init();">
		<canvas id="canvas" width="1000" height="800">
			<!-- alternate content -->
		</canvas>
	</body>
	</html>